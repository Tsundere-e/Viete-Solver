<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VieteSolver üéÄ‚ú®</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;600;700&family=Fira+Code&display=swap');
        
        :root {
            --pink-main: #ff85a2;
            --purple-main: #b794f4;
        }

        body { 
            font-family: 'Quicksand', sans-serif; 
            background: #fff;
            min-height: 100vh;
            overflow-x: hidden;
            cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" style="fill:pink"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>'), auto;
        }

        #glitter-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(20px);
            border: 2px solid rgba(255, 255, 255, 0.9);
            box-shadow: 0 20px 50px -15px rgba(255, 133, 162, 0.4);
            border-radius: 3rem;
            position: relative;
            z-index: 10;
        }

        .sticker-img {
            width: 100%;
            height: 130px;
            object-fit: cover;
            border-radius: 1.8rem;
            border: 4px solid white;
            box-shadow: 0 8px 20px rgba(255, 182, 193, 0.4);
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .sticker-img:hover {
            transform: scale(1.15) rotate(-5deg);
            box-shadow: 0 12px 30px rgba(255, 133, 162, 0.6);
        }

        .shimmer-text {
            background: linear-gradient(90deg, #ff85a2, #b794f4, #ff85a2);
            background-size: 200% auto;
            color: transparent;
            -webkit-background-clip: text;
            animation: shimmer 3s linear infinite;
        }

        @keyframes shimmer {
            to { background-position: 200% center; }
        }

        .floating {
            animation: float 4s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .latex-container h1, .latex-container h2 { color: #db2777; font-weight: 900; margin-top: 1.5rem; margin-bottom: 1rem; }
        .latex-container p { margin-bottom: 1rem; line-height: 1.8; font-size: 1.1rem; }
        .latex-container li { margin-bottom: 0.8rem; padding-left: 1.5rem; border-left: 3px solid #ff85a2; font-style: italic; }

        .loader-pink {
            border: 4px solid rgba(255, 133, 162, 0.2);
            border-top: 4px solid #ff85a2;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 0.8s cubic-bezier(0.5, 0, 0.5, 1) infinite;
        }

        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        #step-console p {
            animation: slideIn 0.3s ease-out forwards;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); filter: blur(5px); }
            to { opacity: 1; transform: translateX(0); filter: blur(0); }
        }
    </style>
</head>
<body class="p-4 md:p-8">
    <canvas id="glitter-canvas"></canvas>

    <div class="max-w-6xl mx-auto space-y-10 relative">
        <header class="text-center space-y-4 pt-4">
            <div class="flex items-center justify-center gap-4 floating">
                <i data-lucide="sparkle" class="text-pink-400 w-8 h-8"></i>
                <h1 class="text-6xl font-black shimmer-text italic tracking-tighter">
                    VieteSolver
                </h1>
                <i data-lucide="sparkle" class="text-pink-400 w-8 h-8"></i>
            </div>
            <p class="text-pink-400 font-black tracking-[0.5em] text-[10px] uppercase bg-white/50 backdrop-blur-md py-2 px-4 rounded-full inline-block border border-white">
                Brains, Beauty & Big Equations ‚ú©¬∞ÔΩ°‚ãÜ‚∏ú ‚úà
            </p>
        </header>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
            <!-- Stickers Card -->
            <div class="glass-card p-10 flex flex-col justify-center space-y-6">
                <div class="grid grid-cols-2 gap-6">
                    <img src="https://i.pinimg.com/originals/6d/b6/73/6db6738cc7e1bf2ea139d97804294617.jpg" class="sticker-img" alt="Cute Sticker">
                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRLC5de4nPNJsVWQo3MQyxKJmiH6zFIQzjImQ&s" class="sticker-img" alt="Anime Vibe">
                    <img src="https://upload-os-bbs.hoyolab.com/upload/2023/09/02/360374682/20ade5ea9ce2f8a0453587348d3541d4_2153532981055111591.jpg?x-oss-process=image%2Fresize%2Cs_1000%2Fauto-orient%2C0%2Finterlace%2C1%2Fformat%2Cwebp%2Fquality%2Cq_70" class="sticker-img" alt="Kaomoji sticker">
                    <div class="bg-gradient-to-br from-pink-100 to-purple-100 rounded-[2rem] flex items-center justify-center border-4 border-white shadow-xl sticker-img">
                        <span class="text-pink-400 font-bold text-center leading-tight p-2 text-sm italic">
                            (ÔΩ°‚Ä¢ÃÄ·¥ó-)‚úß <br> IQ > EGO
                        </span>
                    </div>
                </div>
                <p class="text-center text-pink-300 font-bold italic text-xs tracking-widest uppercase">
                    ÀóÀèÀã because being smart is hot ÀéÀäÀó
                </p>
            </div>

            <!-- Upload Card -->
            <div id="dropzone" class="glass-card p-12 border-4 border-dashed border-pink-200 hover:border-pink-400 transition-all cursor-pointer group flex flex-col items-center justify-center text-center overflow-hidden">
                <input type="file" id="fileInput" class="hidden" accept="image/*">
                <div class="w-24 h-24 bg-gradient-to-tr from-pink-200 to-purple-200 rounded-[2.5rem] flex items-center justify-center mb-8 group-hover:scale-110 group-hover:rotate-12 transition-all shadow-inner">
                    <i data-lucide="wand-2" class="w-12 h-12 text-white"></i>
                </div>
                <h3 class="text-pink-600 font-black text-2xl italic uppercase">Prove 'em wrong! (À∂ÀÉ ·µï ÀÇÀ∂) .·êü</h3>
                <p class="text-pink-400 text-[10px] font-black mt-4 tracking-[0.3em] uppercase">DROP YOUR SCREENSHOT TO SLAY ‚úß</p>
                
                <div id="previewContainer" class="hidden mt-8 w-full max-w-[220px] rounded-3xl overflow-hidden border-8 border-white shadow-2xl relative animate-fade-in z-20">
                    <img id="imagePreview" class="w-full h-auto" src="" alt="Preview">
                    <button id="removeBtn" class="absolute top-2 right-2 bg-white/90 rounded-full p-2 text-red-400 hover:scale-110 transition-transform shadow-md">
                        <i data-lucide="trash-2" class="w-5 h-5"></i>
                    </button>
                </div>
            </div>

            <!-- Resolution Card -->
            <div id="resultCard" class="glass-card md:col-span-2 min-h-[600px] flex flex-col overflow-hidden">
                <div class="px-12 py-8 border-b border-pink-100 bg-white/40 flex items-center justify-between backdrop-blur-md">
                    <div class="flex items-center gap-4">
                        <div class="w-4 h-4 rounded-full bg-pink-400 animate-ping"></div>
                        <h2 class="text-sm font-black text-pink-600 uppercase tracking-[0.5em]">The Slay Era Resolution ‚óå ‚ú© ‚òÅÔ∏é</h2>
                    </div>
                    <div id="statusIndicator" class="hidden flex items-center gap-3 bg-pink-100/50 px-6 py-2 rounded-full border-2 border-white shadow-sm">
                        <div class="loader-pink"></div>
                        <span class="text-[10px] font-black text-pink-500 uppercase tracking-widest italic">Calculating Realness... („Å£¬¥œâ`)Ôæâ</span>
                    </div>
                    <button id="copyBtn" class="hidden text-[10px] bg-gradient-to-r from-pink-500 via-purple-500 to-pink-500 bg-[length:200%_auto] hover:bg-right text-white px-8 py-3 rounded-full font-black tracking-widest transition-all active:scale-95 shadow-xl flex items-center gap-3">
                        <i data-lucide="copy" class="w-4 h-4"></i>
                        COPY MATH MAGIC
                    </button>
                </div>
                
                <div id="outputContent" class="p-12 md:p-20 flex-grow text-gray-800 overflow-y-auto">
                    <div id="placeholder" class="flex flex-col items-center justify-center h-full space-y-10 text-center">
                        <div class="relative">
                            <div class="w-32 h-32 bg-white rounded-[3rem] flex items-center justify-center border-8 border-pink-50 shadow-2xl floating">
                                <i data-lucide="crown" class="text-pink-400 w-16 h-16"></i>
                            </div>
                            <div class="absolute -top-4 -right-4 bg-purple-400 text-white p-2 rounded-full border-4 border-white rotate-12">
                                <i data-lucide="star" class="w-6 h-6"></i>
                            </div>
                        </div>
                        <div class="space-y-4">
                            <p class="text-pink-400 font-black italic tracking-widest uppercase text-xs">
                                Ready to outsmart the mediocre? <br>
                                („Å•ÔΩ°‚óï‚Äø‚Äø‚óïÔΩ°)„Å•
                            </p>
                            <p class="text-gray-400 text-[10px] font-medium tracking-tighter uppercase italic opacity-70">
                                drop the math, keep the sparkle
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        lucide.createIcons();
        const apiKey = "";
        
        // Audio Effects (Cute & High Pitch)
        const playSound = (freq = 880, type = 'sine') => {
            const ctx = new (window.AudioContext || window.webkitAudioContext)();
            const osc = ctx.createOscillator();
            const gain = ctx.createGain();
            osc.type = type;
            osc.frequency.setValueAtTime(freq, ctx.currentTime);
            osc.frequency.exponentialRampToValueAtTime(freq * 1.5, ctx.currentTime + 0.1);
            gain.gain.setValueAtTime(0.1, ctx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.2);
            osc.connect(gain);
            gain.connect(ctx.destination);
            osc.start();
            osc.stop(ctx.currentTime + 0.2);
        };

        // Glitter Canvas Logic
        const canvas = document.getElementById('glitter-canvas');
        const gctx = canvas.getContext('2d');
        let particles = [];
        
        function resize() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        window.onresize = resize;
        resize();

        class Particle {
            constructor(x, y) {
                this.x = x;
                this.y = y;
                this.size = Math.random() * 3 + 1;
                this.speedX = Math.random() * 2 - 1;
                this.speedY = Math.random() * 2 - 1;
                this.color = `hsl(${Math.random() * 40 + 330}, 100%, 80%)`;
                this.life = 1;
            }
            update() {
                this.x += this.speedX;
                this.y += this.speedY;
                this.life -= 0.01;
            }
            draw() {
                gctx.fillStyle = this.color;
                gctx.globalAlpha = this.life;
                gctx.beginPath();
                gctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                gctx.fill();
            }
        }

        window.addEventListener('mousemove', (e) => {
            for(let i=0; i<2; i++) particles.push(new Particle(e.x, e.y));
        });

        function animateGlitter() {
            gctx.clearRect(0, 0, canvas.width, canvas.height);
            particles = particles.filter(p => p.life > 0);
            particles.forEach(p => { p.update(); p.draw(); });
            requestAnimationFrame(animateGlitter);
        }
        animateGlitter();

        // Application Logic
        const fileInput = document.getElementById('fileInput');
        const dropzone = document.getElementById('dropzone');
        const imagePreview = document.getElementById('imagePreview');
        const previewContainer = document.getElementById('previewContainer');
        const outputContent = document.getElementById('outputContent');
        const statusIndicator = document.getElementById('statusIndicator');
        const copyBtn = document.getElementById('copyBtn');
        const removeBtn = document.getElementById('removeBtn');

        let currentRawSolution = "";

        dropzone.onclick = (e) => { 
            if(e.target === fileInput || e.target.closest('#removeBtn')) return; 
            playSound(1200);
            fileInput.click(); 
        };
        
        fileInput.onchange = (e) => { 
            const file = e.target.files[0]; 
            if (file) handleImage(file); 
        };
        
        removeBtn.onclick = (e) => {
            e.stopPropagation();
            playSound(440, 'square');
            previewContainer.classList.add('hidden');
            fileInput.value = "";
            outputContent.innerHTML = `<div id="placeholder" class="flex flex-col items-center justify-center h-full space-y-10 text-center"><div class="relative"><div class="w-32 h-32 bg-white rounded-[3rem] flex items-center justify-center border-8 border-pink-50 shadow-2xl floating"><i data-lucide="crown" class="text-pink-400 w-16 h-16"></i></div></div><p class="text-pink-400 font-black italic tracking-widest uppercase text-xs">Ready to outsmart the mediocre? <br> („Å•ÔΩ°‚óï‚Äø‚Äø‚óïÔΩ°)„Å•</p></div>`;
            lucide.createIcons();
            copyBtn.classList.add('hidden');
        };

        async function handleImage(file) {
            const reader = new FileReader();
            reader.onload = async (e) => {
                imagePreview.src = e.target.result;
                previewContainer.classList.remove('hidden');
                await solveEquation(e.target.result.split(',')[1]);
            };
            reader.readAsDataURL(file);
        }

        async function showProcessingSteps() {
            playSound(1500, 'triangle');
            const steps = [
                "Scanning your screenshot for math vibes... (  ò ‚Äø  ò )",
                "Analyzing coefficients like a boss... slay üíÖ",
                "Transforming to depressed cubic form... (mechanic era)",
                "Calculating Discriminant Œî (serving absolute roots)... ·∂ª ùóì ê∞Å",
                "Invoking the ghosts of Tartaglia & Vi√®te... (‚à©^o^)‚äÉ‚îÅ‚òÜ",
                "Adding glitter and logic to the final result ‚ú®"
            ];
            
            outputContent.innerHTML = `
                <div class="flex flex-col items-center justify-center h-full space-y-16 py-10">
                    <div class="relative">
                        <img src="https://i.makeagif.com/media/4-06-2021/lrtunl.gif" class="w-80 rounded-[4rem] shadow-2xl border-[12px] border-white ring-8 ring-pink-50" alt="Slaying">
                        <div class="absolute -bottom-6 -right-6 bg-pink-500 text-white px-4 py-2 rounded-2xl font-black italic text-xs shadow-xl animate-bounce">
                            MATHING HARD! ·ïô(  ‚Ä¢ÃÄ ·óú ‚Ä¢ÃÅ  )·ïó
                        </div>
                    </div>
                    <div id="step-console" class="w-full max-w-sm bg-white/60 backdrop-blur-lg p-8 rounded-[3rem] border-2 border-pink-100 text-pink-600 shadow-2xl space-y-3">
                    </div>
                </div>
            `;
            
            const consoleEl = document.getElementById('step-console');
            for (let step of steps) {
                playSound(2000 + (Math.random() * 500));
                const p = document.createElement('p');
                p.className = "text-[11px] font-black uppercase tracking-tighter flex items-center gap-2";
                p.innerHTML = `<span class="text-pink-300">‚òÖ</span> ${step}`;
                consoleEl.appendChild(p);
                await new Promise(r => setTimeout(r, 800));
            }
        }

        async function solveEquation(base64Image) {
            statusIndicator.classList.remove('hidden');
            const processingPromise = showProcessingSteps();

            const prompt = `Solve the cubic equation using Vi√®te/Tartaglia. 
            Respond as a sassy, genius "POC math bestie" in English. You are here to empower and be cutesy but extremely competent. 
            Tone: Slay, cunty, realness. Subtext: Intelligence is the ultimate feminine power.
            Format: Use LaTeX ($$ for blocks, $ for inline). 
            Kaomojis: Use complex ones like („Å•ÔΩ°‚óï‚Äø‚Äø‚óïÔΩ°)„Å•, (‚à©^o^)‚äÉ‚îÅ‚òÜ, (À∂ÀÉ ·µï ÀÇÀ∂) throughout.
            Headers: Use ‚ô°‚ô° for steps.`;

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: prompt }, { inlineData: { mimeType: "image/png", data: base64Image } }] }]
                    })
                });

                const result = await response.json();
                const text = result.candidates?.[0]?.content?.parts?.[0]?.text;
                
                await processingPromise;
                if (text) {
                    currentRawSolution = text;
                    renderSolution(text);
                    playSound(1000, 'sine');
                }
            } catch (err) {
                outputContent.innerHTML = `<div class="text-center space-y-4"><p class="text-red-400 font-black text-xl uppercase italic">The math isn't mathing! (‚ïØ¬∞‚ñ°¬∞Ôºâ‚ïØÔ∏µ ‚îª‚îÅ‚îª</p><p class="text-pink-300 font-bold">Try again, queen!</p></div>`;
            }
            statusIndicator.classList.add('hidden');
        }

        function renderSolution(markdown) {
            const htmlContent = marked.parse(markdown);
            outputContent.innerHTML = `<div class="latex-container prose prose-pink max-w-none text-gray-800 animate-in fade-in slide-in-from-bottom-12 duration-1000">${htmlContent}</div>`;
            copyBtn.classList.remove('hidden');
            
            renderMathInElement(outputContent, {
                delimiters: [
                    {left: '$$', right: '$$', display: true},
                    {left: '$', right: '$', display: false}
                ],
                throwOnError : false
            });
        }

        copyBtn.onclick = () => {
            playSound(1800);
            const el = document.createElement('textarea');
            el.value = currentRawSolution;
            document.body.appendChild(el);
            el.select();
            document.execCommand('copy');
            document.body.removeChild(el);
            const originalText = copyBtn.innerHTML;
            copyBtn.innerHTML = `<span>COPIED! (À∂ÀÉ ·µï ÀÇÀ∂) ‚ú®</span>`;
            setTimeout(() => copyBtn.innerHTML = originalText, 2000);
        };
    </script>
</body>
</html>
